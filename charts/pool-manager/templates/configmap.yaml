apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "pool-manager.fullname" . }}
data:
  config.json: |-
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "pool-manager.fullname" . }}
data:
  pool-manager-config.toml: |
    [Log]
    Environment = {{ .Values.config.log.environment | quote }}
    Level = {{ .Values.config.log.level | quote }}
    Outputs = ["stderr"]

    [Server]
    Host = "0.0.0.0"
    Port = {{ .Values.service.port }}
    ReadTimeout = "60s"
    WriteTimeout = "60s"
    MaxRequestsPerIPAndSecond = 500
    EnableHttpLog = true
    BatchRequestsEnabled = false
    BatchRequestsLimit = 20

    [DB]
    User = {{ .Values.config.sensitive.database.user | quote }}
    Password = {{ .Values.config.sensitive.database.password | quote }}
    Name = {{ .Values.config.database.name | quote }}
    Host = {{ .Values.config.database.host | quote }}
    Port = {{ .Values.config.database.port | quote }}
    EnableLog = false
    MaxConns = 200

    [Sender]
    SequencerURL = {{ .Values.config.rollup.sequencerUrl | quote }}
    ResendTxsCheckInterval = "1s"
    Workers = 5
    QueueSize = 25

    [Monitor]
    L2NodeURL = {{ .Values.config.l2.rpcUrl | quote }}
    Workers = 5
    QueueSize = 25
    RetryWaitInterval = "3s"
    InitialWaitInterval = "1s"
    TxLifeTimeMax = "300s"

